// ==UserScript==
// @name         Kissasian Site Integration Mini
// @namespace    https://github.com/ngsoft
// @version      3.2.0
// @description  removes adds + simplify UI
// @author       daedelus
// @include     *://*kissasian.*/*
// @include     *://*kissanime.*/*
// @noframes
// @grant none
// @updateURL   https://raw.githubusercontent.com/ngsoft/archives/master/kissasian.user.js
// @downloadURL https://raw.githubusercontent.com/ngsoft/archives/master/kissasian.user.js
// ==/UserScript==

!function(){if(window.adblock=!1,window.adblock2=!1,window.turnoff=!0,window.open=function(){},window.eval=function(){},window.top==window.self){var e=location.pathname,i=location.href;if(-1===e.indexOf("/Special/"))if(-1===i.indexOf("kissasian.com")){if(window.top==window.self){var t={loader:{timeout:1500,show:function(){},hide:function(){}},ui:{addcss:function(e){html='<style type="text/css">\x3c!-- '+e+" --\x3e</style>",$("body").append(html)}},init:function(e){t.ready(e)},onload:function(){},load:function(){},wait:function(){t.onload(),interval=setInterval(function(){"undefined"!=typeof $&&(t.load(),clearInterval(interval))},50)},ready:function(e){t.load=e,"loading"!=document.readyState?t.wait():document.addEventListener("DOMContentLoaded",t.wait)}},n={html:'<style type="text/css">\x3c!-- div#spinner{display : block;position : fixed;z-index: 100;background-color: #121212; opacity: 0.8; background-repeat : no-repeat;background-position : center;left : 0;bottom : 0;right : 0;  top : 0;} div#spinner img{left : 50%;top : 50%;position : absolute;z-index : 101;width : 32px;height : 32px;margin-left : -16px;margin-top : -16px;} --\x3e</style><div id="spinner"><img alt="" class="" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCA0MCA0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjE7IiB4PSIwcHgiIHk9IjBweCI+CiAgICA8ZGVmcz4KICAgICAgICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWwogICAgICAgICAgICBALXdlYmtpdC1rZXlmcmFtZXMgc3BpbiB7CiAgICAgICAgICAgICAgZnJvbSB7CiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRvIHsKICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTM1OWRlZykKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgQGtleWZyYW1lcyBzcGluIHsKICAgICAgICAgICAgICBmcm9tIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRvIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKC0zNTlkZWcpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHN2ZyB7CiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7CiAgICAgICAgICAgICAgICAtd2Via2l0LWFuaW1hdGlvbjogc3BpbiAxLjVzIGxpbmVhciBpbmZpbml0ZTsKICAgICAgICAgICAgICAgIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOwogICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBzcGluIDEuNXMgbGluZWFyIGluZmluaXRlOwogICAgICAgICAgICB9CiAgICAgICAgXV0+PC9zdHlsZT4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJvdXRlciI+CiAgICAgICAgPGc+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMCwwQzIyLjIwNTgsMCAyMy45OTM5LDEuNzg4MTMgMjMuOTkzOSwzLjk5MzlDMjMuOTkzOSw2LjE5OTY4IDIyLjIwNTgsNy45ODc4MSAyMCw3Ljk4NzgxQzE3Ljc5NDIsNy45ODc4MSAxNi4wMDYxLDYuMTk5NjggMTYuMDA2MSwzLjk5MzlDMTYuMDA2MSwxLjc4ODEzIDE3Ljc5NDIsMCAyMCwwWiIgc3R5bGU9ImZpbGw6YmxhY2s7Ii8+CiAgICAgICAgPC9nPgogICAgICAgIDxnPgogICAgICAgICAgICA8cGF0aCBkPSJNNS44NTc4Niw1Ljg1Nzg2QzcuNDE3NTgsNC4yOTgxNSA5Ljk0NjM4LDQuMjk4MTUgMTEuNTA2MSw1Ljg1Nzg2QzEzLjA2NTgsNy40MTc1OCAxMy4wNjU4LDkuOTQ2MzggMTEuNTA2MSwxMS41MDYxQzkuOTQ2MzgsMTMuMDY1OCA3LjQxNzU4LDEzLjA2NTggNS44NTc4NiwxMS41MDYxQzQuMjk4MTUsOS45NDYzOCA0LjI5ODE1LDcuNDE3NTggNS44NTc4Niw1Ljg1Nzg2WiIgc3R5bGU9ImZpbGw6cmdiKDIxMCwyMTAsMjEwKTsiLz4KICAgICAgICA8L2c+CiAgICAgICAgPGc+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMCwzMi4wMTIyQzIyLjIwNTgsMzIuMDEyMiAyMy45OTM5LDMzLjgwMDMgMjMuOTkzOSwzNi4wMDYxQzIzLjk5MzksMzguMjExOSAyMi4yMDU4LDQwIDIwLDQwQzE3Ljc5NDIsNDAgMTYuMDA2MSwzOC4yMTE5IDE2LjAwNjEsMzYuMDA2MUMxNi4wMDYxLDMzLjgwMDMgMTcuNzk0MiwzMi4wMTIyIDIwLDMyLjAxMjJaIiBzdHlsZT0iZmlsbDpyZ2IoMTMwLDEzMCwxMzApOyIvPgogICAgICAgIDwvZz4KICAgICAgICA8Zz4KICAgICAgICAgICAgPHBhdGggZD0iTTI4LjQ5MzksMjguNDkzOUMzMC4wNTM2LDI2LjkzNDIgMzIuNTgyNCwyNi45MzQyIDM0LjE0MjEsMjguNDkzOUMzNS43MDE5LDMwLjA1MzYgMzUuNzAxOSwzMi41ODI0IDM0LjE0MjEsMzQuMTQyMUMzMi41ODI0LDM1LjcwMTkgMzAuMDUzNiwzNS43MDE5IDI4LjQ5MzksMzQuMTQyMUMyNi45MzQyLDMyLjU4MjQgMjYuOTM0MiwzMC4wNTM2IDI4LjQ5MzksMjguNDkzOVoiIHN0eWxlPSJmaWxsOnJnYigxMDEsMTAxLDEwMSk7Ii8+CiAgICAgICAgPC9nPgogICAgICAgIDxnPgogICAgICAgICAgICA8cGF0aCBkPSJNMy45OTM5LDE2LjAwNjFDNi4xOTk2OCwxNi4wMDYxIDcuOTg3ODEsMTcuNzk0MiA3Ljk4NzgxLDIwQzcuOTg3ODEsMjIuMjA1OCA2LjE5OTY4LDIzLjk5MzkgMy45OTM5LDIzLjk5MzlDMS43ODgxMywyMy45OTM5IDAsMjIuMjA1OCAwLDIwQzAsMTcuNzk0MiAxLjc4ODEzLDE2LjAwNjEgMy45OTM5LDE2LjAwNjFaIiBzdHlsZT0iZmlsbDpyZ2IoMTg3LDE4NywxODcpOyIvPgogICAgICAgIDwvZz4KICAgICAgICA8Zz4KICAgICAgICAgICAgPHBhdGggZD0iTTUuODU3ODYsMjguNDkzOUM3LjQxNzU4LDI2LjkzNDIgOS45NDYzOCwyNi45MzQyIDExLjUwNjEsMjguNDkzOUMxMy4wNjU4LDMwLjA1MzYgMTMuMDY1OCwzMi41ODI0IDExLjUwNjEsMzQuMTQyMUM5Ljk0NjM4LDM1LjcwMTkgNy40MTc1OCwzNS43MDE5IDUuODU3ODYsMzQuMTQyMUM0LjI5ODE1LDMyLjU4MjQgNC4yOTgxNSwzMC4wNTM2IDUuODU3ODYsMjguNDkzOVoiIHN0eWxlPSJmaWxsOnJnYigxNjQsMTY0LDE2NCk7Ii8+CiAgICAgICAgPC9nPgogICAgICAgIDxnPgogICAgICAgICAgICA8cGF0aCBkPSJNMzYuMDA2MSwxNi4wMDYxQzM4LjIxMTksMTYuMDA2MSA0MCwxNy43OTQyIDQwLDIwQzQwLDIyLjIwNTggMzguMjExOSwyMy45OTM5IDM2LjAwNjEsMjMuOTkzOUMzMy44MDAzLDIzLjk5MzkgMzIuMDEyMiwyMi4yMDU4IDMyLjAxMjIsMjBDMzIuMDEyMiwxNy43OTQyIDMzLjgwMDMsMTYuMDA2MSAzNi4wMDYxLDE2LjAwNjFaIiBzdHlsZT0iZmlsbDpyZ2IoNzQsNzQsNzQpOyIvPgogICAgICAgIDwvZz4KICAgICAgICA8Zz4KICAgICAgICAgICAgPHBhdGggZD0iTTI4LjQ5MzksNS44NTc4NkMzMC4wNTM2LDQuMjk4MTUgMzIuNTgyNCw0LjI5ODE1IDM0LjE0MjEsNS44NTc4NkMzNS43MDE5LDcuNDE3NTggMzUuNzAxOSw5Ljk0NjM4IDM0LjE0MjEsMTEuNTA2MUMzMi41ODI0LDEzLjA2NTggMzAuMDUzNiwxMy4wNjU4IDI4LjQ5MzksMTEuNTA2MUMyNi45MzQyLDkuOTQ2MzggMjYuOTM0Miw3LjQxNzU4IDI4LjQ5MzksNS44NTc4NloiIHN0eWxlPSJmaWxsOnJnYig1MCw1MCw1MCk7Ii8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4K" /></div>',show:function(){$("div#spinner").length>0?$("div#spinner").show():$("body").append(n.html)},hide:function(){$("div#spinner").length>0&&$("div#spinner").hide()}};t.loader.show=n.show,t.loader.hide=function(){setTimeout(function(){n.hide()},t.loader.timeout)};var g={loggedin:!0,ui:{css:'\n                [data-player-enabled] #head, .hidden, div[id*="divAds"], div[style*="fixed;"], iframe:not(.ignored), #videoAd, #btnShowComments{ display: none!important;}\n                .nomargin, .banner, .bigBarContainer{margin: 0!important;}\n                .clear, #container:not(.videoplayer) .clear2{height: 0; max-height: 0;}\n                #vidlink{display: block;text-align: center;font-size: 12pt;margin: 10px 0 20px 0;}\n                .visible{visibility: visible!important;}\n                #centerDivVideo{margin-top: 15px;}\n                .bksbutton{text-decoration: underline;}\n            ',bks:function(){var e={button:$("th:contains('Latest')"),completed:$("td:contains('Completed')").parent("tr"),uncomplete:$("td a:contains('Episode')").parents("tr")};e.button.addClass("bksbutton").attr("data-toogle","all"),e.button.click(function(i){return toogle=$(this).attr("data-toogle"),"all"==toogle?($(this).attr("data-toogle","uncomplete").attr("title","Show Complete"),e.completed.addClass("hidden"),void e.uncomplete.removeClass("hidden")):"uncomplete"==toogle?($(this).attr("data-toogle","complete").attr("title","Show All"),e.completed.removeClass("hidden"),void e.uncomplete.addClass("hidden")):void("complete"==toogle&&($(this).attr("data-toogle","all").attr("title","Show Uncomplete"),e.completed.removeClass("hidden"),e.uncomplete.removeClass("hidden")))}).click();var i={button:$("th:contains('Status')"),watched:$('a.aUnRead[style*="none"]').parent("td").parent("tr"),unwatched:$('a.aRead[style*="none"]').parent("td").parent("tr")};i.button.addClass("bksbutton").attr("title","Toggle Visibility").attr("data-toogle","all"),i.button.click(function(e){return toogle=$(this).attr("data-toogle"),"unwatched"==toogle?($(this).attr("data-toogle","watched").attr("title","Show All"),i.unwatched.addClass("hidden"),void i.watched.removeClass("hidden")):"watched"==toogle?($(this).attr("data-toogle","all").attr("title","Show Unwatched"),i.unwatched.removeClass("hidden"),void i.watched.removeClass("hidden")):void("all"==toogle&&($(this).attr("data-toogle","unwatched").attr("title","Show Watched"),i.unwatched.removeClass("hidden"),i.watched.addClass("hidden")))})},epl:function(){$("table.listing tr td").parent("tr").addClass("ep"),table=$("table.listing"),table.html(table.find("tr").get().reverse()),table.prepend(table.find("tr:not(.ep)").get().reverse())},player:{link:"",filename:"",loaded:!1,getlink:function(){filename=document.title.split("-"),filename=filename[0].trim(),filename+=".mp4",filename.length>0&&(g.ui.player.filename=filename.trim(),link=$("#divDownload a").first().clone(),link.length>0?g.ui.player.link=link:g.ui.player.link=$("div.clsTempMSg div:contains('If the player does not work') a").first().clone()),g.ui.player.addlink()},addlink:function(){g.ui.player.link.length<1||g.ui.player.filename.length<1||(target=$("#container .barContent").first(),el=$("<div><b>Download : </b></div>"),el.attr("id","vidlink"),el.append(g.ui.player.link),a=el.find("a"),-1===a.attr("href").indexOf("?")?a.html(g.ui.player.filename).attr("target","_blank").attr("href",a.attr("href")+"?title="+g.ui.player.filename):a.html(g.ui.player.filename).attr("target","_blank").attr("href",a.attr("href")+"&title="+g.ui.player.filename),target.prepend(el))},init:function(){t.loader.timeout=3500,g.ui.player.loaded=!0,$("body").attr("data-player-enabled",!0),$("#divContentVideo iframe").addClass("ignored"),$(".divCloseBut a").click(),$("div > span.st_facebook_hcount").parent("div").parent("div").remove(),$("#divComments").remove(),$("div.barContent > div > div > div:contains('video is stuttering,')").parent("div").addClass("hidden"),0!=g.loggedin&&g.ui.player.getlink()}},main:function(){$("div.barTitle:contains('Remove ads')").parent("div.rightBox").addClass("hidden"),$("div.barTitle:contains('^^')").parent("div.rightBox").addClass("hidden"),$("div.barTitle:contains('Related')").parent("div.rightBox").addClass("hidden"),$("div.barTitle:contains('Comments')").parent("div.bigBarContainer").addClass("hidden"),$("div.barTitle:contains('Episodes')").parent("div.bigBarContainer").prev().addClass("hidden"),rsstag=$('a[href*="/RSS/"]').parent("div"),rsstag.next().addClass("hidden"),rsstag.addClass("hidden")}},linkclick:function(){n.show()},init:function(){"/Login"!=e?"/Register"!=e&&(t.ui.addcss(g.ui.css),t.loader.show(),$('div#topHolderBox a[href*="/Login"]').length>0&&(g.loggedin=!1),"/BookmarkList"==e&&g.ui.bks(),i.match(/\/Drama\//)&&g.ui.epl(),$("#centerDivVideo").length>0&&g.ui.player.init(),g.ui.main(),$('div[id*="divAds"]').remove(),$("iframe:not(.ignored)").remove(),$('div[style*="fixed;"]').remove(),$('a[href^="/"').click(g.linkclick),$('a[href*="//kissasian"').click(g.linkclick),d.init(),t.loader.hide()):$("#btnSubmit").hide().parent("div").append('<input type="submit" value="Sign in" />')}},d={checkbox:'<a href="#" id="betamode"><input type="checkbox" disabled /> Beta Player</a>',target:{},click:function(e){e.preventDefault(),d.checked()?(checked=d.checked(!1),d.disable()):(checked=d.checked(!0),d.enable()),g.ui.player.loaded&&(t.loader.show(),s="default",1==checked&&(s="beta"),params=new URLSearchParams(location.search),params.set("s",s),location.href=`${location.pathname}?${params}`)},checked:function(e=null){return null==e&&(void 0===Cookies.get("betamode")&&Cookies.set("betamode",!1,{expires:14}),e=Cookies.get("betamode")),"true"==e||1==e?(e=!0,d.checkbox.find("input").first().attr("checked",e)):(e=!1,d.checkbox.find("input").first().removeAttr("checked")),Cookies.set("betamode",e,{expires:14}),e},enable:function(){d.checked(!0),d.target.each(function(){void 0!==$(this).attr("data-original-link")&&(href=$(this).attr("data-original-link"),href+="&s=beta",$(this).attr("href",href))})},disable:function(){d.checked(!1),d.target.each(function(){void 0!==$(this).attr("data-original-link")&&(href=$(this).attr("data-original-link"),$(this).attr("href",href))})},init:function(){d.checkbox=$(d.checkbox),$("div#menu_box").append(d.checkbox),(g.ui.player.loaded||0==g.loggedin)&&$("div#navsubbar p").append("| ").append(d.checkbox),checked=d.checked(),d.checkbox.on("click",d.click),d.target=$('a[href*="?id="]'),d.target.each(function(){href=$(this).attr("href"),-1===href.indexOf("/Drama/")&&-1===href.indexOf("/Anime/")||void 0===$(this).attr("data-original-link")&&$(this).attr("data-original-link",href)}),checked&&d.enable()}};t.wait=function(){t.onload(),interval=setInterval(function(){"undefined"!=typeof $&&"undefined"!=typeof Cookies&&(t.load(),clearInterval(interval))},50)},t.onload=function(){},t.init(g.init)}}else location.href=i.replace("kissasian.com","kissasian.ch")}}();
!function(e){var n=!1;if("function"==typeof define&&define.amd&&(define(e),n=!0),"object"==typeof exports&&(module.exports=e(),n=!0),!n){var o=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=o,t}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var o=arguments[e];for(var t in o)n[t]=o[t]}return n}function n(o){function t(n,r,i){var c;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},t.defaults,i)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(e){}r=o.write?o.write(r,n):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=(n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var s="";for(var f in i)i[f]&&(s+="; "+f,!0!==i[f]&&(s+="="+i[f]));return document.cookie=n+"="+r+s}n||(c={});for(var p=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,u=0;u<p.length;u++){var l=p[u].split("="),C=l.slice(1).join("=");this.json||'"'!==C.charAt(0)||(C=C.slice(1,-1));try{var g=l[0].replace(d,decodeURIComponent);if(C=o.read?o.read(C,g):o(C,g)||C.replace(d,decodeURIComponent),this.json)try{C=JSON.parse(C)}catch(e){}if(n===g){c=C;break}n||(c[g]=C)}catch(e){}}return c}}return t.set=t,t.get=function(e){return t.call(t,e)},t.getJSON=function(){return t.apply({json:!0},[].slice.call(arguments))},t.defaults={},t.remove=function(n,o){t(n,"",e(o,{expires:-1}))},t.withConverter=n,t}return n(function(){})});